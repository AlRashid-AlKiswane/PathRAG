# =============================================================================
# PATHRAG APPLICATION ENVIRONMENT CONFIGURATION
# =============================================================================
# Production-ready configuration file for PathRAG document processing system
# Version: 1.0.0
# Last Updated: 2025-08-30
# 
# SECURITY NOTICE:
# - This file contains sensitive configuration data
# - Never commit this file to version control
# - Use environment-specific copies (.env.dev, .env.prod, .env.test)
# - Ensure proper file permissions (600) in production
# =============================================================================

# =============================================================================
# ENVIRONMENT SETTINGS
# =============================================================================
NODE_ENV=development
APP_NAME=PathRAG
APP_VERSION=1.0.0
LOG_LEVEL=info

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# MongoDB Settings
MONGODB_PROVIDER=local
MONGODB_LOCAL_URI=mongodb://localhost:27017/pathrag_ncec
MONGODB_REMOTE_URI=mongodb+srv://username:password@cluster.mongodb.net/pathrag_ncec
MONGODB_CONNECTION_TIMEOUT=30000
MONGODB_SOCKET_TIMEOUT=30000
MONGODB_MAX_POOL_SIZE=10
MONGODB_ENABLE_WEB_UI=true

# Database Connection Pool
DB_MIN_POOL_SIZE=2
DB_MAX_POOL_SIZE=10
DB_CONNECTION_TIMEOUT_MS=30000

# =============================================================================
# DOCUMENT PROCESSING CONFIGURATION
# =============================================================================
# File Upload Settings
UPLOAD_MAX_FILE_SIZE_MB=50
UPLOAD_ALLOWED_TYPES=.txt,.pdf,.docx,.md
UPLOAD_STORAGE_PATH=./storage/documents
UPLOAD_TEMP_PATH=./storage/temp

# Text Processing
TEXT_CHUNK_SIZE=512
TEXT_CHUNK_OVERLAP=50
TEXT_MAX_CHUNK_COUNT=10000

# Document Artifacts (Optional - Docling Integration)
# DOCLING_ARTIFACTS_PATH=/opt/pathrag/artifacts

# =============================================================================
# MACHINE LEARNING MODELS
# =============================================================================
# Embedding Models
EMBEDDING_MODEL_NAME=all-MiniLM-L6-v2
EMBEDDING_DIMENSIONS=384
EMBEDDING_BATCH_SIZE=32
EMBEDDING_DEVICE=cpu

# Ollama Configuration
OLLAMA_HOST=http://localhost:11434
OLLAMA_EMBEDDING_MODEL=all-minilm:l6-v2
OLLAMA_CHAT_MODEL=llama3.2:3b
OLLAMA_TIMEOUT_SECONDS=300

# Model Performance Tuning
MODEL_CACHE_SIZE=1000
MODEL_WARMUP_ENABLED=true

# =============================================================================
# TEXT GENERATION PARAMETERS
# =============================================================================
# Token Limits
MAX_INPUT_TOKENS=2048
MAX_OUTPUT_TOKENS=1024
CONTEXT_WINDOW_SIZE=4096

# Generation Quality Controls
TEMPERATURE=0.7
TOP_K=40
TOP_P=0.95
REPETITION_PENALTY=1.1
FREQUENCY_PENALTY=0.0
PRESENCE_PENALTY=0.0

# =============================================================================
# PATHRAG ALGORITHM CONFIGURATION
# =============================================================================
# Graph Construction
GRAPH_SIMILARITY_THRESHOLD=0.75
GRAPH_MAX_EDGES_PER_NODE=50
GRAPH_DECAY_RATE=0.9
GRAPH_PRUNING_THRESHOLD=0.3

# Path Finding
PATH_MAX_DEPTH=5
PATH_BEAM_WIDTH=10
PATH_SCORE_THRESHOLD=0.6

# =============================================================================
# ENVIRONMENT-SPECIFIC CONFIGURATIONS
# =============================================================================
# Development Environment
DEV_DEBUG_MODE=true
DEV_MAX_WORKERS=2
DEV_BATCH_SIZE=500
DEV_CACHE_SIZE_MB=100
DEV_MEMORY_LIMIT_GB=2.0
DEV_MAX_GRAPH_NODES=10000
DEV_CHECKPOINT_INTERVAL_DOCS=1000
DEV_ENABLE_PROFILING=true

# Production Environment
PROD_DEBUG_MODE=false
PROD_MAX_WORKERS=8
PROD_BATCH_SIZE=2000
PROD_CACHE_SIZE_MB=1000
PROD_MEMORY_LIMIT_GB=16.0
PROD_MAX_GRAPH_NODES=100000
PROD_CHECKPOINT_INTERVAL_DOCS=5000
PROD_ENABLE_PROFILING=false

# Memory-Constrained Environment
MEMORY_MAX_WORKERS=2
MEMORY_BATCH_SIZE=200
MEMORY_CACHE_SIZE_MB=50
MEMORY_MEMORY_LIMIT_GB=1.0
MEMORY_MAX_GRAPH_NODES=5000
MEMORY_CHECKPOINT_INTERVAL_DOCS=500
MEMORY_ENABLE_SWAP=true

# =============================================================================
# SYSTEM MONITORING & ALERTING
# =============================================================================
# Resource Thresholds (0.0 - 1.0)
MONITOR_CPU_THRESHOLD=0.85
MONITOR_MEMORY_THRESHOLD=0.90
MONITOR_DISK_THRESHOLD=0.85
MONITOR_GPU_THRESHOLD=0.90

# Monitoring Intervals
MONITOR_HEALTH_CHECK_INTERVAL_SEC=30
MONITOR_METRICS_COLLECTION_INTERVAL_SEC=60
MONITOR_LOG_ROTATION_DAYS=7

# Alert Configuration
ALERT_EMAIL_ENABLED=false
ALERT_EMAIL_SMTP_HOST=smtp.gmail.com
ALERT_EMAIL_SMTP_PORT=587
ALERT_EMAIL_USERNAME=alerts@yourcompany.com
ALERT_EMAIL_PASSWORD=your_secure_password
ALERT_EMAIL_RECIPIENTS=admin@yourcompany.com,devops@yourcompany.com

# =============================================================================
# RETRIEVAL ALGORITHM CONFIGURATIONS
# =============================================================================
# K-Nearest Neighbors
KNN_K_NEIGHBORS=50
KNN_SIMILARITY_THRESHOLD=0.7
KNN_INDEX_TYPE=faiss
KNN_METRIC=cosine

# Hierarchical Clustering
HIERARCHICAL_N_CLUSTERS=200
HIERARCHICAL_INTRA_CLUSTER_K=20
HIERARCHICAL_INTER_CLUSTER_K=5
HIERARCHICAL_LINKAGE_METHOD=ward

# Approximate Nearest Neighbors
ANN_SAMPLE_RATIO=0.05
ANN_INDEX_TREES=10
ANN_SEARCH_K=100

# Locality Sensitive Hashing
LSH_N_HASH_TABLES=10
LSH_N_HASH_BITS=12
LSH_HASH_FAMILY=cosine

# =============================================================================
# PERFORMANCE & SCALABILITY
# =============================================================================
# Threading & Concurrency
MAX_CONCURRENT_REQUESTS=100
WORKER_THREAD_POOL_SIZE=8
ASYNC_QUEUE_SIZE=1000

# Caching Strategy
CACHE_ENABLED=true
CACHE_TTL_SECONDS=3600
CACHE_MAX_SIZE_MB=500
CACHE_EVICTION_POLICY=lru

# Batch Processing
BATCH_PROCESSING_ENABLED=true
BATCH_MAX_SIZE=2000
BATCH_TIMEOUT_SECONDS=300

# =============================================================================
# DATA PERSISTENCE & BACKUP
# =============================================================================
# Checkpoint Configuration
CHECKPOINT_ENABLED=true
CHECKPOINT_DIRECTORY=./storage/checkpoints
CHECKPOINT_GRAPH_FILE=graph_state.pkl
CHECKPOINT_METADATA_FILE=metadata.json
CHECKPOINT_COMPRESSION=gzip
CHECKPOINT_RETENTION_DAYS=30

# Backup Settings
BACKUP_ENABLED=false
BACKUP_DIRECTORY=./storage/backups
BACKUP_SCHEDULE_CRON="0 2 * * *"
BACKUP_RETENTION_DAYS=90

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# API Security
API_RATE_LIMIT_REQUESTS=1000
API_RATE_LIMIT_WINDOW_MINUTES=60
API_ENABLE_CORS=true
API_ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com

# Authentication (if applicable)
AUTH_ENABLED=false
AUTH_SECRET_KEY=your_secret_key_here
AUTH_TOKEN_EXPIRY_HOURS=24

# Input Validation
VALIDATE_FILE_CONTENT=true
MAX_QUERY_LENGTH=1000
SANITIZE_USER_INPUT=true

# =============================================================================
# LOGGING & DEBUGGING
# =============================================================================
# Logging Configuration
LOG_FORMAT=json
LOG_FILE_PATH=./logs/pathrag.log
LOG_MAX_SIZE_MB=100
LOG_BACKUP_COUNT=5
LOG_ENABLE_CONSOLE=true

# Debug Settings
DEBUG_ENABLED=false
DEBUG_VERBOSE_LOGGING=false
DEBUG_SAVE_INTERMEDIATE_RESULTS=false
DEBUG_PROFILE_PERFORMANCE=false

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Experimental Features
FEATURE_ADVANCED_CHUNKING=false
FEATURE_MULTILINGUAL_SUPPORT=false
FEATURE_REAL_TIME_UPDATES=false
FEATURE_DISTRIBUTED_PROCESSING=false

# UI Features
FEATURE_WEB_INTERFACE=true
FEATURE_API_DOCS=true
FEATURE_METRICS_DASHBOARD=false

# =============================================================================
# EXTERNAL INTEGRATIONS
# =============================================================================
# Third-party Services (Optional)
OPENAI_API_KEY=your_openai_api_key_here
HUGGINGFACE_API_KEY=your_huggingface_api_key_here
COHERE_API_KEY=your_cohere_api_key_here

# Webhook Configuration
WEBHOOK_ENABLED=false
WEBHOOK_URL=https://your-webhook-endpoint.com/pathrag
WEBHOOK_SECRET=your_webhook_secret

# =============================================================================
# DEVELOPMENT UTILITIES
# =============================================================================
# Development Tools
DEV_AUTO_RELOAD=true
DEV_MOCK_EXTERNAL_APIS=false
DEV_SEED_DATABASE=false
DEV_GENERATE_TEST_DATA=false

# Testing Configuration
TEST_DATABASE_URI=mongodb://localhost:27017/pathrag_test
TEST_DOCUMENT_PATH=./tests/fixtures/documents
TEST_TIMEOUT_SECONDS=30

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================
# Server Settings
SERVER_HOST=0.0.0.0
SERVER_PORT=8000
SERVER_WORKERS=4
SERVER_TIMEOUT_SECONDS=300

# SSL Configuration (Production)
SSL_ENABLED=false
SSL_CERT_PATH=/path/to/ssl/cert.pem
SSL_KEY_PATH=/path/to/ssl/private.key

# Load Balancing
LOAD_BALANCER_ENABLED=false
HEALTH_CHECK_ENDPOINT=/health
METRICS_ENDPOINT=/metrics

# =============================================================================
# ENVIRONMENT VALIDATION
# =============================================================================
# Required Environment Variables Validation
REQUIRED_VARS=MONGODB_LOCAL_URI,EMBEDDING_MODEL_NAME,DOC_LOCATION_STORE

# =============================================================================
# CONFIGURATION NOTES
# =============================================================================
# 1. Environment Separation:
#    - Use .env.development for local development
#    - Use .env.production for production deployments
#    - Use .env.test for testing environments
#
# 2. Security Best Practices:
#    - Rotate API keys regularly
#    - Use strong, unique passwords
#    - Enable monitoring and alerting
#    - Regularly update dependencies
#
# 3. Performance Tuning:
#    - Adjust worker counts based on CPU cores
#    - Monitor memory usage and adjust limits
#    - Optimize batch sizes for your data
#    - Enable caching for better performance
#
# 4. Monitoring:
#    - Set appropriate resource thresholds
#    - Configure alerting for critical issues
#    - Enable logging for troubleshooting
#    - Use health checks in production
#
# 5. Scaling Considerations:
#    - Increase worker counts for higher throughput
#    - Adjust graph size limits based on available memory
#    - Consider distributed processing for large datasets
#    - Implement proper backup strategies
# =============================================================================
